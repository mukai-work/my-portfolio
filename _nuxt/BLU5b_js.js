import{_ as w}from"./DOt4HaIX.js";import{e as k,h as r,A as C,c as s,a as t,b as u,F as _,C as y,w as c,l as $,t as x,j as F,k as N,v as V,o,D as P,d as p}from"./DrbLrrAD.js";const B={class:"flex h-screen bg-[#36393f] text-gray-200"},D={class:"w-60 bg-[#2f3136] p-4 flex flex-col"},M={class:"space-y-1 flex-1 overflow-y-auto"},S=["onClick"],T={class:"flex-1 flex flex-col bg-[#36393f]"},L={class:"h-12 px-4 flex items-center shadow"},j={class:"flex-1"},z={key:0,class:"font-bold text-lg"},A={key:1,class:"text-gray-400"},E={class:"flex space-x-4 text-sm text-blue-400"},I={class:"flex-1 overflow-y-auto p-4 space-y-4"},O={key:0,class:"space-y-4"},U={class:"text-sm"},q={key:1,class:"text-gray-400"},Q=k({__name:"index",setup(G){const m=r([]),f=r([]),l=r(null),i=r("");async function b(){m.value=await $fetch("/api/board/posts")}async function h(n){l.value=n,f.value=await $fetch(`/api/board/posts/${n.id}/comments`)}async function g(){if(!l.value||!i.value.trim())return;const n=l.value.id;await $fetch(`/api/board/posts/${n}/comments`,{method:"POST",body:{body:i.value}}),f.value=await $fetch(`/api/board/posts/${n}/comments`),i.value=""}return C(b),(n,e)=>{const d=w;return o(),s("div",B,[t("aside",D,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold mb-4"},"掲示板",-1)),t("ul",M,[(o(!0),s(_,null,y(m.value,a=>{var v;return o(),s("li",{key:a.id,onClick:H=>h(a),class:P(["px-2 py-1 rounded cursor-pointer hover:bg-[#42464d]",a.id===((v=l.value)==null?void 0:v.id)?"bg-[#5865F2] text-white":"text-gray-300"])}," # "+x(a.title),11,S)}),128))]),u(d,{to:"/board/new",class:"mt-4 px-2 py-1 text-center bg-[#5865F2] text-white rounded hover:bg-[#4752C4]"},{default:c(()=>e[1]||(e[1]=[p(" 新規投稿 ")])),_:1})]),t("main",T,[t("header",L,[t("div",j,[l.value?(o(),s("h3",z,"# "+x(l.value.title),1)):(o(),s("p",A,"投稿を選択してください"))]),t("nav",E,[u(d,{to:"/signup",class:"hover:underline"},{default:c(()=>e[3]||(e[3]=[p("会員登録")])),_:1}),u(d,{to:"/login",class:"hover:underline"},{default:c(()=>e[4]||(e[4]=[p("ログイン")])),_:1}),u(d,{to:"/mypage",class:"hover:underline"},{default:c(()=>e[5]||(e[5]=[p("マイページ")])),_:1})])]),t("section",I,[l.value?(o(),s("ul",O,[(o(!0),s(_,null,y(f.value,a=>(o(),s("li",{key:a.id,class:"flex items-start space-x-2"},[e[6]||(e[6]=t("div",{class:"w-8 h-8 rounded-full bg-gray-500"},null,-1)),t("p",U,x(a.body),1)]))),128))])):(o(),s("p",q,"左の投稿から選択してください"))]),l.value?(o(),s("form",{key:0,onSubmit:F(g,["prevent"]),class:"p-4 bg-[#40444b] flex space-x-2"},[N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),class:"flex-1 bg-[#202225] text-gray-200 p-2 rounded focus:outline-none",placeholder:"コメントを入力"},null,512),[[V,i.value]]),e[7]||(e[7]=t("button",{type:"submit",class:"px-4 py-2 bg-[#5865F2] text-white rounded"}," 投稿 ",-1))],32)):$("",!0)])])}}});export{Q as default};
