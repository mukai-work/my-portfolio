var E=t=>{throw TypeError(t)};var P=(t,i,r)=>i.has(t)||E("Cannot "+r);var w=(t,i,r)=>(P(t,i,"read from private field"),r?r.call(t):i.get(t)),C=(t,i,r)=>i.has(t)?E("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,r);import{j as _,f as g,k as j,l as B,m as M,n as L,p as V,e as F,c as O,a as d,h as q,i as T,v as z,t as H,g as J,o as x,q as X}from"./BHhdmL01.js";function Y(t,i){if(typeof t!="string")throw new TypeError("argument str must be a string");const r={},e=i||{},n=e.decode||G;let a=0;for(;a<t.length;){const o=t.indexOf("=",a);if(o===-1)break;let s=t.indexOf(";",a);if(s===-1)s=t.length;else if(s<o){a=t.lastIndexOf(";",o-1)+1;continue}const c=t.slice(a,o).trim();if(e!=null&&e.filter&&!(e!=null&&e.filter(c))){a=s+1;continue}if(r[c]===void 0){let u=t.slice(o+1,s).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),r[c]=K(u,n)}a=s+1}return r}function G(t){return t.includes("%")?decodeURIComponent(t):t}function K(t,i){try{return i(t)}catch{return t}}const v=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function I(t,i,r){const e=r||{},n=e.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!v.test(t))throw new TypeError("argument name is invalid");const a=n(i);if(a&&!v.test(a))throw new TypeError("argument val is invalid");let o=t+"="+a;if(e.maxAge!==void 0&&e.maxAge!==null){const s=e.maxAge-0;if(Number.isNaN(s)||!Number.isFinite(s))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(s)}if(e.domain){if(!v.test(e.domain))throw new TypeError("option domain is invalid");o+="; Domain="+e.domain}if(e.path){if(!v.test(e.path))throw new TypeError("option path is invalid");o+="; Path="+e.path}if(e.expires){if(!Q(e.expires)||Number.isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(o+="; HttpOnly"),e.secure&&(o+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":{o+="; Priority=Low";break}case"medium":{o+="; Priority=Medium";break}case"high":{o+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:{o+="; SameSite=Strict";break}case"lax":{o+="; SameSite=Lax";break}case"strict":{o+="; SameSite=Strict";break}case"none":{o+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return e.partitioned&&(o+="; Partitioned"),o}function Q(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function D(t){return typeof t=="string"?`'${t}'`:new Z().serialize(t)}const Z=function(){var i;class t{constructor(){C(this,i,new Map)}compare(e,n){const a=typeof e,o=typeof n;return a==="string"&&o==="string"?e.localeCompare(n):a==="number"&&o==="number"?e-n:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(n,!0))}serialize(e,n){if(e===null)return"null";switch(typeof e){case"string":return n?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const n=Object.prototype.toString.call(e);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),e);const a=e.constructor,o=a===Object||a===void 0?"":a.name;if(o!==""&&globalThis[o]===a)return this.serializeBuiltInType(o,e);if(typeof e.toJSON=="function"){const s=e.toJSON();return o+(s!==null&&typeof s=="object"?this.$object(s):`(${this.serialize(s)})`)}return this.serializeObjectEntries(o,Object.entries(e))}serializeBuiltInType(e,n){const a=this["$"+e];if(a)return a.call(this,n);if(typeof(n==null?void 0:n.entries)=="function")return this.serializeObjectEntries(e,n.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,n){const a=Array.from(n).sort((s,c)=>this.compare(s[0],c[0]));let o=`${e}{`;for(let s=0;s<a.length;s++){const[c,u]=a[s];o+=`${this.serialize(c,!0)}:${this.serialize(u)}`,s<a.length-1&&(o+=",")}return o+"}"}$object(e){let n=w(this,i).get(e);return n===void 0&&(w(this,i).set(e,`#${w(this,i).size}`),n=this.serializeObject(e),w(this,i).set(e,n)),n}$function(e){const n=Function.prototype.toString.call(e);return n.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(e){let n="[";for(let a=0;a<e.length;a++)n+=this.serialize(e[a]),a<e.length-1&&(n+=",");return n+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((n,a)=>this.compare(n,a)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}i=new WeakMap;for(const r of["Error","RegExp","URL"])t.prototype["$"+r]=function(e){return`${r}(${e})`};for(const r of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join(",")}]`};for(const r of["BigInt64Array","BigUint64Array"])t.prototype["$"+r]=function(e){return`${r}[${e.join("n,")}${e.length>0?"n":""}]`};return t}();function W(t,i){return t===i||D(t)===D(i)}function f(t){if(typeof t!="object")return t;var i,r,e=Object.prototype.toString.call(t);if(e==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){r=new t.constructor;for(i in t)t.hasOwnProperty(i)&&r[i]!==t[i]&&(r[i]=f(t[i]))}else{r={};for(i in t)i==="__proto__"?Object.defineProperty(r,i,{value:f(t[i]),configurable:!0,enumerable:!0,writable:!0}):r[i]=f(t[i])}return r}if(e==="[object Array]"){for(i=t.length,r=Array(i);i--;)r[i]=f(t[i]);return r}return e==="[object Set]"?(r=new Set,t.forEach(function(n){r.add(f(n))}),r):e==="[object Map]"?(r=new Map,t.forEach(function(n,a){r.set(f(a),f(n))}),r):e==="[object Date]"?new Date(+t):e==="[object RegExp]"?(r=new RegExp(t.source,t.flags),r.lastIndex=t.lastIndex,r):e==="[object DataView]"?new t.constructor(f(t.buffer)):e==="[object ArrayBuffer]"?t.slice(0):e.slice(-6)==="Array]"?new t.constructor(t):t}const ee={path:"/",watch:!0,decode:t=>_(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},S=window.cookieStore;function te(t,i){var u;const r={...ee,...i};r.filter??(r.filter=l=>l===t);const e=U(r)||{};let n;r.maxAge!==void 0?n=r.maxAge*1e3:r.expires&&(n=r.expires.getTime()-Date.now());const a=n!==void 0&&n<=0,o=a||e[t]===void 0||e[t]===null,s=f(a?void 0:e[t]??((u=r.default)==null?void 0:u.call(r))),c=n&&!a?ne(s,n,r.watch&&r.watch!=="shallow"):g(s);{let l=null;try{!S&&typeof BroadcastChannel<"u"&&(l=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const h=(p=!1)=>{!p&&(r.readonly||W(c.value,e[t]))||(ie(t,c.value,r),e[t]=f(c.value),l==null||l.postMessage({value:r.encode(c.value)}))},$=p=>{var m;const y=p.refresh?(m=U(r))==null?void 0:m[t]:r.decode(p.value);b=!0,c.value=y,e[t]=f(y),V(()=>{b=!1})};let b=!1;const A=!!M();if(A&&j(()=>{b=!0,h(),l==null||l.close()}),S){const p=y=>{const m=y.changed.find(k=>k.name===t),N=y.deleted.find(k=>k.name===t);m&&$({value:m.value}),N&&$({value:null})};S.addEventListener("change",p),A&&j(()=>S.removeEventListener("change",p))}else l&&(l.onmessage=({data:p})=>$(p));r.watch&&B(c,()=>{b||h()},{deep:r.watch!=="shallow"}),o&&h(o)}return c}function U(t={}){return Y(document.cookie,t)}function re(t,i,r={}){return i==null?I(t,i,{...r,maxAge:-1}):I(t,i,r)}function ie(t,i,r={}){document.cookie=re(t,i,r)}const R=2147483647;function ne(t,i,r){let e,n,a=0;const o=r?g(t):{value:t};return M()&&j(()=>{n==null||n(),clearTimeout(e)}),L((s,c)=>{r&&(n=B(o,c));function u(){a=0,clearTimeout(e);const l=i-a,h=l<R?l:R;e=setTimeout(()=>{if(a+=h,a<i)return u();o.value=void 0,c()},h)}return{get(){return s(),o.value},set(l){u(),o.value=l,c()}}})}const oe={class:"max-w-md mx-auto p-8"},ae={key:0,class:"text-red-500 text-sm"},le=F({__name:"login",setup(t){const i=g(""),r=g(""),e=g("");async function n(){try{const a=await $fetch("/api/login",{method:"POST",body:{email:i.value,password:r.value}}),o=te("token");o.value=a.token,await X("/board")}catch{e.value="メールアドレスまたはパスワードが正しくありません。"}}return(a,o)=>(x(),O("div",oe,[o[3]||(o[3]=d("h1",{class:"text-2xl font-bold text-center mb-6"},"ログイン",-1)),d("form",{onSubmit:J(n,["prevent"]),class:"space-y-4"},[d("div",null,[T(d("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),type:"email",placeholder:"メールアドレス",class:"border rounded w-full p-2"},null,512),[[z,i.value]])]),d("div",null,[T(d("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>r.value=s),type:"password",placeholder:"パスワード",class:"border rounded w-full p-2"},null,512),[[z,r.value]])]),e.value?(x(),O("div",ae,H(e.value),1)):q("",!0),o[2]||(o[2]=d("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded"}," ログイン ",-1))],32)]))}});export{le as default};
