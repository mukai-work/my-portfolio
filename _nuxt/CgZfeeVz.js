import{_ as w}from"./CUrpPUGA.js";import{e as k,h as N,N as q,G as _,c,a as t,b as m,k as B,w as b,v as C,I as d,J as V,t as r,F as $,B as g,o as p,d as h}from"./C3uF1IN0.js";import{u as D}from"./BVR-Tf7C.js";import"./wSbNHcIL.js";const E={class:"p-4"},L={class:"flex items-center gap-4 mb-2"},T={class:"mb-2"},F={class:"w-full mt-2 border-collapse"},O={class:"border p-2"},U={class:"border p-2"},A={class:"border p-2"},G={class:"border p-2"},I={class:"border p-2"},J={class:"border p-2"},M=["onClick"],K=k({__name:"pokemon",async setup(Q){let l,u;const n=N(""),{data:i,refresh:f}=([l,u]=q(()=>D("/api/cards",{query:{q:n}},"$OB2OUOgLDT")),l=await l,u(),l),x=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity,0))??0}),y=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity*a.price,0))??0});async function v(o){await $fetch(`/api/cards/${o}`,{method:"DELETE"}),await f()}return(o,e)=>{const a=w;return p(),c("div",E,[e[4]||(e[4]=t("h1",{class:"text-2xl mb-4"},"ポケカ在庫管理ツール",-1)),t("div",L,[m(a,{to:"/cards/new",class:"text-blue-600 underline"},{default:b(()=>e[1]||(e[1]=[h("カード登録")])),_:1}),B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>V(n)?n.value=s:null),placeholder:"名前で検索",class:"border p-1 flex-1"},null,512),[[C,d(n)]])]),t("p",T,"総数: "+r(d(x))+" / 総額: "+r(d(y)),1),t("table",F,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"border p-2"},"名前"),t("th",{class:"border p-2"},"セット"),t("th",{class:"border p-2"},"レアリティ"),t("th",{class:"border p-2"},"枚数"),t("th",{class:"border p-2"},"価格"),t("th",{class:"border p-2"})])],-1)),t("tbody",null,[(p(!0),c($,null,g(d(i),s=>(p(),c("tr",{key:s.id},[t("td",O,r(s.name),1),t("td",U,r(s.setName),1),t("td",A,r(s.rarity),1),t("td",G,r(s.quantity),1),t("td",I,r(s.price),1),t("td",J,[m(a,{to:`/cards/${s.id}`,class:"text-blue-600 mr-2"},{default:b(()=>e[2]||(e[2]=[h("編集")])),_:2},1032,["to"]),t("button",{class:"text-red-600",onClick:R=>v(s.id)},"削除",8,M)])]))),128))])])])}}});export{K as default};
