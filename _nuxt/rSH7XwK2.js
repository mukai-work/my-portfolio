import{h as v,z as M,A as E,B as j,e as L,c as y,a as s,t as x,C as e,D as T,k as C,j as U,E as V,F as z,G as N,H as $,o as S}from"./3ksz-kXm.js";const q=()=>{const k=v(25),c=v(5),d=v(4),g=v(1),f=v("work"),l=v(k.value*60*1e3),o=v(!1),r=v(!1),b=v(!1);let i=null,u=null;const m=M(()=>(f.value==="work"?k.value:c.value)*60*1e3),h=M(()=>{const n=Math.ceil(l.value/1e3),P=String(Math.floor(n/60)).padStart(2,"0"),B=String(n%60).padStart(2,"0");return`${P}:${B}`}),D=M(()=>(m.value-l.value)/m.value*100);function p(){if(!(!o.value||i===null)){if(l.value=Math.max(0,i-Date.now()),l.value<=0){F();return}u=requestAnimationFrame(p)}}function w(){o.value||r.value||(b.value=!0,i=Date.now()+l.value,o.value=!0,p())}function _(){o.value&&(o.value=!1,r.value=!0,u&&cancelAnimationFrame(u),u=null)}function t(){r.value&&(i=Date.now()+l.value,o.value=!0,r.value=!1,p())}function a(){u&&cancelAnimationFrame(u),u=null,o.value=!1,r.value=!1,i=null,l.value=m.value}function A(){u&&cancelAnimationFrame(u),u=null,o.value=!1,r.value=!1,i=null,f.value="work",g.value=1,b.value=!1,l.value=k.value*60*1e3}function F(){if(f.value==="work")f.value="break",l.value=c.value*60*1e3;else{if(g.value+=1,g.value>d.value){A();return}f.value="work",l.value=k.value*60*1e3}i=Date.now()+l.value,p()}function R(n){n.code==="Space"?(n.preventDefault(),!o.value&&!r.value?w():o.value?_():r.value&&t()):n.key==="s"||n.key==="S"?(n.preventDefault(),a()):n.key==="r"||n.key==="R"?(n.preventDefault(),A()):!o.value&&!r.value&&(n.key==="ArrowUp"?(n.preventDefault(),d.value<12&&d.value++):n.key==="ArrowDown"&&(n.preventDefault(),d.value>1&&d.value--))}return E(()=>{window.addEventListener("keydown",R)}),j(()=>{window.removeEventListener("keydown",R),u&&cancelAnimationFrame(u)}),{workMinutes:k,breakMinutes:c,totalSets:d,currentSet:g,phase:f,remainingMs:l,phaseDuration:m,formattedTime:h,progress:D,isRunning:o,isPaused:r,lockSettings:b,start:w,pause:_,resume:t,stop:a,reset:A}},G={class:"min-h-screen p-4 bg-gray-100"},H={class:"text-center space-y-4"},I={class:"text-7xl font-mono"},K={class:"text-xl"},J=["aria-valuenow","aria-valuemax"],O={class:"text-sm"},Q={class:"flex justify-center space-x-4 mt-8"},W={class:"mt-8 text-center"},X=["disabled"],Y=["value"],ee=L({__name:"pomodoro",setup(k){const{totalSets:c,currentSet:d,phase:g,formattedTime:f,phaseDuration:l,remainingMs:o,progress:r,isRunning:b,isPaused:i,lockSettings:u,start:m,pause:h,resume:D,stop:p,reset:w}=q();return(_,t)=>(S(),y("main",G,[t[7]||(t[7]=s("header",{class:"flex justify-between items-center mb-8"},[s("h1",{class:"text-2xl font-bold"},"ポモドーロタイマー"),s("span",{class:"text-gray-500","aria-hidden":"true"},"⚙️")],-1)),s("section",H,[s("div",I,x(e(f)),1),s("div",K,x(e(g)==="work"?"作業":"休憩"),1),s("div",{class:"w-full h-4 bg-gray-300 rounded",role:"progressbar","aria-valuenow":e(l)-e(o),"aria-valuemax":e(l)},[s("div",{class:"h-4 bg-orange-400 rounded",style:T({width:e(r)+"%"})},null,4)],8,J),s("div",O,x(e(d))+" / "+x(e(c)),1)]),s("section",Q,[!e(b)&&!e(i)?(S(),y("button",{key:0,onClick:t[0]||(t[0]=(...a)=>e(m)&&e(m)(...a)),"aria-label":"Start",class:"px-4 py-2 bg-orange-500 text-white rounded"}," Start ")):C("",!0),e(b)?(S(),y("button",{key:1,onClick:t[1]||(t[1]=(...a)=>e(h)&&e(h)(...a)),"aria-label":"Pause",class:"px-4 py-2 bg-orange-500 text-white rounded"}," Pause ")):C("",!0),e(i)?(S(),y("button",{key:2,onClick:t[2]||(t[2]=(...a)=>e(D)&&e(D)(...a)),"aria-label":"Resume",class:"px-4 py-2 bg-orange-500 text-white rounded"}," Resume ")):C("",!0),s("button",{onClick:t[3]||(t[3]=(...a)=>e(p)&&e(p)(...a)),"aria-label":"Stop",class:"px-4 py-2 bg-gray-300 rounded"}," Stop "),s("button",{onClick:t[4]||(t[4]=(...a)=>e(w)&&e(w)(...a)),"aria-label":"Reset",class:"px-4 py-2 bg-gray-300 rounded"}," Reset ")]),s("section",W,[t[6]||(t[6]=s("label",{class:"mr-2",for:"set-select"},"セット数:",-1)),U(s("select",{id:"set-select","onUpdate:modelValue":t[5]||(t[5]=a=>z(c)?c.value=a:null),disabled:e(u),class:"border p-2 rounded"},[(S(),y(N,null,$(12,a=>s("option",{key:a,value:a},x(a),9,Y)),64))],8,X),[[V,e(c),void 0,{number:!0}]])])]))}});export{ee as default};
