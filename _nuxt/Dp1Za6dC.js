import{_ as w}from"./BNxYhghd.js";import{e as C,h as N,N as k,z as _,c,a as t,b as m,k as V,w as b,v as q,H as d,I as B,t as r,F as E,C as T,o as u,d as h}from"./RlM34d2_.js";import{u as $}from"./BXZBSgfZ.js";import"./wSbNHcIL.js";const g={class:"p-4"},D={class:"flex items-center gap-4 mb-2"},F={class:"mb-2"},L={class:"w-full mt-2 border-collapse"},R={class:"border p-2"},S={class:"border p-2"},I={class:"border p-2"},Q={class:"border p-2"},z={class:"border p-2"},A={class:"border p-2"},H=["onClick"],K=C({__name:"index",async setup(M){let l,p;const n=N(""),{data:i,refresh:y}=([l,p]=k(()=>$("/api/cards",{query:{q:n}},"$c0Nyiy2BBF")),l=await l,p(),l),f=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity,0))??0}),x=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity*a.price,0))??0});async function v(o){await $fetch(`/api/cards/${o}`,{method:"DELETE"}),await y()}return(o,e)=>{const a=w;return u(),c("div",g,[e[4]||(e[4]=t("h1",{class:"text-2xl mb-4"},"Card Inventory",-1)),t("div",D,[m(a,{to:"/cards/new",class:"text-blue-600 underline"},{default:b(()=>e[1]||(e[1]=[h("Register Card")])),_:1}),V(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>B(n)?n.value=s:null),placeholder:"Search by name",class:"border p-1 flex-1"},null,512),[[q,d(n)]])]),t("p",F,"Total Cards: "+r(d(f))+" / Total Value: "+r(d(x)),1),t("table",L,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"border p-2"},"Name"),t("th",{class:"border p-2"},"Set"),t("th",{class:"border p-2"},"Rarity"),t("th",{class:"border p-2"},"Quantity"),t("th",{class:"border p-2"},"Price"),t("th",{class:"border p-2"})])],-1)),t("tbody",null,[(u(!0),c(E,null,T(d(i),s=>(u(),c("tr",{key:s.id},[t("td",R,r(s.name),1),t("td",S,r(s.setName),1),t("td",I,r(s.rarity),1),t("td",Q,r(s.quantity),1),t("td",z,r(s.price),1),t("td",A,[m(a,{to:`/cards/${s.id}`,class:"text-blue-600 mr-2"},{default:b(()=>e[2]||(e[2]=[h("Edit")])),_:2},1032,["to"]),t("button",{class:"text-red-600",onClick:P=>v(s.id)},"Delete",8,H)])]))),128))])])])}}});export{K as default};
