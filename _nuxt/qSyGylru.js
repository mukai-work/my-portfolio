import{h as d,y as D,n as V,z as E,D as j,e as L,c as M,a,k as N,d as C,j as A,v as T,B as s,E as P,t as g,G as $,H as z,F as q,A as G,o as F}from"./0VW8G8jj.js";const H=()=>{const m=d(25),c=d(5),r=d(4),v=d(1),i=d("work"),l=d(m.value*60*1e3),n=d(!1),u=d(!1),p=d(!1);let f=null,o=null;const b=D(()=>(i.value==="work"?m.value:c.value)*60*1e3),x=D(()=>{const e=Math.ceil(l.value/1e3),U=String(Math.floor(e/60)).padStart(2,"0"),B=String(e%60).padStart(2,"0");return`${U}:${B}`}),S=D(()=>(b.value-l.value)/b.value*100);V(m,e=>{!p.value&&i.value==="work"&&(l.value=e*60*1e3)}),V(c,e=>{!p.value&&i.value==="break"&&(l.value=e*60*1e3)});function w(){if(!(!n.value||f===null)){if(l.value=Math.max(0,f-Date.now()),l.value<=0){R();return}o=requestAnimationFrame(w)}}function _(){n.value||u.value||(p.value=!0,f=Date.now()+l.value,n.value=!0,w())}function y(){n.value&&(n.value=!1,u.value=!0,o&&cancelAnimationFrame(o),o=null)}function k(){u.value&&(f=Date.now()+l.value,n.value=!0,u.value=!1,w())}function h(){o&&cancelAnimationFrame(o),o=null,n.value=!1,u.value=!1,f=null,i.value="work",v.value=1,p.value=!1,l.value=m.value*60*1e3}function R(){if(i.value==="work")i.value="break",l.value=c.value*60*1e3;else{if(v.value+=1,v.value>r.value){h();return}i.value="work",l.value=m.value*60*1e3}f=Date.now()+l.value,w()}function t(e){e.code==="Space"?(e.preventDefault(),!n.value&&!u.value?_():n.value?y():u.value&&k()):e.key==="r"||e.key==="R"?(e.preventDefault(),h()):!n.value&&!u.value&&(e.key==="ArrowUp"?(e.preventDefault(),r.value<12&&r.value++):e.key==="ArrowDown"&&(e.preventDefault(),r.value>1&&r.value--))}return E(()=>{window.addEventListener("keydown",t)}),j(()=>{window.removeEventListener("keydown",t),o&&cancelAnimationFrame(o)}),{workMinutes:m,breakMinutes:c,totalSets:r,currentSet:v,phase:i,remainingMs:l,phaseDuration:b,formattedTime:x,progress:S,isRunning:n,isPaused:u,lockSettings:p,start:_,pause:y,resume:k,reset:h}},I={class:"min-h-screen p-4 bg-gray-100"},K={class:"relative flex justify-between items-center mb-8"},J={class:"relative"},O={key:0,class:"absolute right-0 mt-2 p-4 bg-white border rounded shadow-md space-y-2"},Q={class:"block text-sm"},W=["disabled"],X={class:"block text-sm"},Y=["disabled"],Z={class:"text-center space-y-4"},ee={class:"text-7xl font-mono"},te={class:"text-xl"},ae=["aria-valuenow","aria-valuemax"],se={class:"text-sm"},le={class:"flex justify-center space-x-4 mt-8"},ne={class:"mt-8 text-center"},oe=["disabled"],ue=["value"],ie=L({__name:"pomodoro",setup(m){const{workMinutes:c,breakMinutes:r,totalSets:v,currentSet:i,phase:l,formattedTime:n,phaseDuration:u,remainingMs:p,progress:f,isRunning:o,isPaused:b,lockSettings:x,start:S,pause:w,resume:_,reset:y}=H(),k=d(!1);function h(){!o.value&&!b.value?S():o.value?w():b.value&&_()}return(R,t)=>(F(),M("main",I,[a("header",K,[t[7]||(t[7]=a("h1",{class:"text-2xl font-bold"},"ポモドーロタイマー",-1)),a("div",J,[a("button",{onClick:t[0]||(t[0]=e=>k.value=!k.value),"aria-label":"Settings",class:"text-gray-500"}," ⚙️ "),k.value?(F(),M("div",O,[a("label",Q,[t[5]||(t[5]=C(" 作業時間 ")),A(a("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>P(c)?c.value=e:null),disabled:s(x),min:"1",class:"border p-1 rounded w-20 ml-2"},null,8,W),[[T,s(c),void 0,{number:!0}]])]),a("label",X,[t[6]||(t[6]=C(" 休憩時間 ")),A(a("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>P(r)?r.value=e:null),disabled:s(x),min:"1",class:"border p-1 rounded w-20 ml-2"},null,8,Y),[[T,s(r),void 0,{number:!0}]])])])):N("",!0)])]),a("section",Z,[a("div",ee,g(s(n)),1),a("div",te,g(s(l)==="work"?"作業":"休憩"),1),a("div",{class:"w-full h-4 bg-gray-300 rounded",role:"progressbar","aria-valuenow":s(u)-s(p),"aria-valuemax":s(u)},[a("div",{class:"h-4 bg-orange-400 rounded",style:$({width:s(f)+"%"})},null,4)],8,ae),a("div",se,g(s(i))+" / "+g(s(v)),1)]),a("section",le,[a("button",{onClick:h,"aria-label":"Start or Pause",class:"px-4 py-2 bg-orange-500 text-white rounded"},g(s(o)?"Pause":"Start"),1),a("button",{onClick:t[3]||(t[3]=(...e)=>s(y)&&s(y)(...e)),"aria-label":"Reset",class:"px-4 py-2 bg-gray-300 rounded"}," Reset ")]),a("section",ne,[t[8]||(t[8]=a("label",{class:"mr-2",for:"set-select"},"セット数:",-1)),A(a("select",{id:"set-select","onUpdate:modelValue":t[4]||(t[4]=e=>P(v)?v.value=e:null),disabled:s(x),class:"border p-2 rounded"},[(F(),M(q,null,G(12,e=>a("option",{key:e,value:e},g(e),9,ue)),64))],8,oe),[[z,s(v),void 0,{number:!0}]])])]))}});export{ie as default};
