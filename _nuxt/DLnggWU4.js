import{_ as w}from"./C6pO1qL0.js";import{e as k,h as q,K as B,y as _,c,a as t,b as m,j as C,w as b,v as E,B as d,E as N,t as r,F as V,A as $,o as p,d as h}from"./DJRvlybp.js";import{u as g}from"./CSR864Gn.js";import"./wSbNHcIL.js";const D={class:"p-4"},L={class:"flex items-center gap-4 mb-2"},T={class:"mb-2"},F={class:"w-full mt-2 border-collapse"},O={class:"border p-2"},A={class:"border p-2"},U={class:"border p-2"},j={class:"border p-2"},K={class:"border p-2"},M={class:"border p-2"},Q=["onClick"],J=k({__name:"pokemon",async setup(R){let l,u;const n=q(""),{data:i,refresh:f}=([l,u]=B(()=>g("/api/cards",{query:{q:n}},"$OB2OUOgLDT")),l=await l,u(),l),x=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity,0))??0}),y=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity*a.price,0))??0});async function v(o){await $fetch(`/api/cards/${o}`,{method:"DELETE"}),await f()}return(o,e)=>{const a=w;return p(),c("div",D,[e[4]||(e[4]=t("h1",{class:"text-2xl mb-4"},"ポケカ在庫管理ツール",-1)),t("div",L,[m(a,{to:"/cards/new",class:"text-blue-600 underline"},{default:b(()=>e[1]||(e[1]=[h("カード登録")])),_:1}),C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>N(n)?n.value=s:null),placeholder:"名前で検索",class:"border p-1 flex-1"},null,512),[[E,d(n)]])]),t("p",T,"総数: "+r(d(x))+" / 総額: "+r(d(y)),1),t("table",F,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"border p-2"},"名前"),t("th",{class:"border p-2"},"セット"),t("th",{class:"border p-2"},"レアリティ"),t("th",{class:"border p-2"},"枚数"),t("th",{class:"border p-2"},"価格"),t("th",{class:"border p-2"})])],-1)),t("tbody",null,[(p(!0),c(V,null,$(d(i),s=>(p(),c("tr",{key:s.id},[t("td",O,r(s.name),1),t("td",A,r(s.setName),1),t("td",U,r(s.rarity),1),t("td",j,r(s.quantity),1),t("td",K,r(s.price),1),t("td",M,[m(a,{to:`/cards/${s.id}`,class:"text-blue-600 mr-2"},{default:b(()=>e[2]||(e[2]=[h("編集")])),_:2},1032,["to"]),t("button",{class:"text-red-600",onClick:S=>v(s.id)},"削除",8,Q)])]))),128))])])])}}});export{J as default};
