import{_ as w}from"./CR1Jw-Rf.js";import{e as k,h as C,N,z as _,c,a as t,b as m,k as q,w as b,v as V,H as d,I as $,t as r,F as g,C as B,o as p,d as h}from"./jMY1ho4J.js";import{u as D}from"./Cc8vGaNz.js";import"./wSbNHcIL.js";const E={class:"p-4"},L={class:"flex items-center gap-4 mb-2"},T={class:"mb-2"},F={class:"w-full mt-2 border-collapse"},O={class:"border p-2"},U={class:"border p-2"},z={class:"border p-2"},A={class:"border p-2"},H={class:"border p-2"},I={class:"border p-2"},M=["onClick"],K=k({__name:"pokemon",async setup(Q){let l,u;const n=C(""),{data:i,refresh:f}=([l,u]=N(()=>D("/api/cards",{query:{q:n}},"$OB2OUOgLDT")),l=await l,u(),l),x=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity,0))??0}),y=_(()=>{var o;return((o=i.value)==null?void 0:o.reduce((e,a)=>e+a.quantity*a.price,0))??0});async function v(o){await $fetch(`/api/cards/${o}`,{method:"DELETE"}),await f()}return(o,e)=>{const a=w;return p(),c("div",E,[e[4]||(e[4]=t("h1",{class:"text-2xl mb-4"},"ポケカ在庫管理ツール",-1)),t("div",L,[m(a,{to:"/cards/new",class:"text-blue-600 underline"},{default:b(()=>e[1]||(e[1]=[h("カード登録")])),_:1}),q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>$(n)?n.value=s:null),placeholder:"名前で検索",class:"border p-1 flex-1"},null,512),[[V,d(n)]])]),t("p",T,"総数: "+r(d(x))+" / 総額: "+r(d(y)),1),t("table",F,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"border p-2"},"名前"),t("th",{class:"border p-2"},"セット"),t("th",{class:"border p-2"},"レアリティ"),t("th",{class:"border p-2"},"枚数"),t("th",{class:"border p-2"},"価格"),t("th",{class:"border p-2"})])],-1)),t("tbody",null,[(p(!0),c(g,null,B(d(i),s=>(p(),c("tr",{key:s.id},[t("td",O,r(s.name),1),t("td",U,r(s.setName),1),t("td",z,r(s.rarity),1),t("td",A,r(s.quantity),1),t("td",H,r(s.price),1),t("td",I,[m(a,{to:`/cards/${s.id}`,class:"text-blue-600 mr-2"},{default:b(()=>e[2]||(e[2]=[h("編集")])),_:2},1032,["to"]),t("button",{class:"text-red-600",onClick:R=>v(s.id)},"削除",8,M)])]))),128))])])])}}});export{K as default};
